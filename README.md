# Login and Register System (ç™»å½•æ³¨å†Œç³»ç»Ÿ)

è¿™æ˜¯ä¸€ä¸ªåŸºäº **NestJS** æ¡†æ¶å¼€å‘çš„åç«¯æœåŠ¡ï¼Œå®ç°äº†åŸºæœ¬çš„ç”¨æˆ·æ³¨å†Œã€ç™»å½•å’Œèº«ä»½éªŒè¯åŠŸèƒ½ã€‚

## ğŸ›  æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: [NestJS](https://nestjs.com/) (v11)
- **æ•°æ®åº“**: MySQL
- **ORM**: TypeORM
- **è®¤è¯**: JWT (@nestjs/jwt)
- **éªŒè¯**: class-validator

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **ç”¨æˆ·æ³¨å†Œ**: æ”¯æŒç”¨æˆ·åå’Œå¯†ç çš„æ ¼å¼æ ¡éªŒã€‚
- **ç”¨æˆ·ç™»å½•**: éªŒè¯æˆåŠŸåç­¾å‘ JWT Tokenã€‚
- **èº«ä»½éªŒè¯**: æä¾›äº† `LoginGuard` ç”¨äºä¿æŠ¤éœ€è¦ç™»å½•çš„æ¥å£ï¼ˆéªŒè¯ Bearer Tokenï¼‰ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

æœ¬é¡¹ç›®ä½¿ç”¨ `pnpm` è¿›è¡ŒåŒ…ç®¡ç†ï¼š

```bash
pnpm install
```

### 2. æ•°æ®åº“é…ç½®

é¡¹ç›®é»˜è®¤è¿æ¥æœ¬åœ° MySQL æ•°æ®åº“ã€‚è¯·ç¡®ä¿ä½ å·²å®‰è£… MySQL å¹¶è¿è¡Œã€‚

æ•°æ®åº“é…ç½®ä½äº `src/app.module.ts` æ–‡ä»¶ä¸­ï¼š

- **Host**: `localhost`
- **Port**: `3306`
- **Username**: `root`
- **Password**: `123456`
- **Database**: `login_test`

> **æ³¨æ„**: å¯åŠ¨é¡¹ç›®å‰ï¼Œè¯·ç¡®ä¿ MySQL ä¸­å·²å­˜åœ¨åä¸º `login_test` çš„æ•°æ®åº“ï¼Œæˆ–è€…åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ä¸ºä½ ç°æœ‰çš„æ•°æ®åº“ã€‚TypeORM ä¼šè‡ªåŠ¨åŒæ­¥è¡¨ç»“æ„ (`synchronize: true`)ã€‚

### 3. å¯åŠ¨é¡¹ç›®

```bash
# å¼€å‘æ¨¡å¼
pnpm run start:dev
```

æœåŠ¡é»˜è®¤è¿è¡Œåœ¨ `http://localhost:3000`ã€‚

## ğŸ“š API æ¥å£æ–‡æ¡£

### 1. ç”¨æˆ·æ³¨å†Œ

- **URL**: `/user/register`
- **Method**: `POST`
- **Body**:

```json
{
  "username": "myuser123", // å¿…å¡«ï¼Œé•¿åº¦ 6-30ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€#ã€$ã€%ã€_ã€-
  "password": "mypassword" // å¿…å¡«ï¼Œé•¿åº¦ 6-30
}
```

### 2. ç”¨æˆ·ç™»å½•

- **URL**: `/user/login`
- **Method**: `POST`
- **Body**:

```json
{
  "username": "myuser123",
  "password": "mypassword"
}
```

- **å“åº”**: ç™»å½•æˆåŠŸåï¼ŒToken ä¼šåŒ…å«åœ¨å“åº”å¤´çš„ `token` å­—æ®µä¸­ã€‚

### 3. å—ä¿æŠ¤æ¥å£ (ç¤ºä¾‹)

å¦‚æœéœ€è¦è®¿é—®å—ä¿æŠ¤çš„æ¥å£ï¼Œéœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ Tokenï¼š

- **Header**:
  - `Authorization`: `Bearer <your_token>`

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ app.module.ts       # æ ¹æ¨¡å— (åŒ…å«æ•°æ®åº“é…ç½®)
â”œâ”€â”€ login.guard.ts      # ç™»å½•å®ˆå« (JWT éªŒè¯)
â”œâ”€â”€ user/               # ç”¨æˆ·æ¨¡å—
â”‚   â”œâ”€â”€ dto/            # æ•°æ®ä¼ è¾“å¯¹è±¡ (æ ¡éªŒè§„åˆ™)
â”‚   â”œâ”€â”€ entities/       # æ•°æ®åº“å®ä½“
â”‚   â”œâ”€â”€ user.controller.ts # æ§åˆ¶å™¨ (å®šä¹‰è·¯ç”±)
â”‚   â””â”€â”€ user.service.ts    # ä¸šåŠ¡é€»è¾‘
â””â”€â”€ main.ts             # å…¥å£æ–‡ä»¶
```
